*{box-sizing:border-box}
:root{
  --bg1:#fffdf2; --bg2:#ffe6a7;
  --panel:#fff; --ink:#1f2937; --shadow:0 12px 28px rgba(0,0,0,.12);
  --radius:18px; --accent:#f59e0b;
}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  background:linear-gradient(var(--bg1),var(--bg2));
  color:var(--ink);
}
.topbar{display:flex;justify-content:flex-end;padding:12px 16px}
.pill{background:#fff;border:0;border-radius:9999px;padding:8px 14px;box-shadow:var(--shadow);cursor:pointer;display:flex;gap:8px;align-items:center;font-weight:700}

.wrap{max-width:1024px;margin:0 auto;padding:12px;display:flex;flex-direction:column;gap:14px}
.stage {background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:12px
  padding-bottom: 120px;
  box-sizing: border-box;

  text-align: center;
  overflow: auto;
}
.svgMount{width:100%;aspect-ratio:16/10;background:#fff;border-radius:14px;overflow:hidden;display:flex;align-items:center;justify-content:center}
.svgMount svg{width:100%;height:100%;display:block}

.controls{display:flex;flex-direction:column;gap:12px;align-items:center}
.swatches{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center}
.sw{width:28px;height:28px;border-radius:50%!important;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.15);
    background:var(--c);cursor:pointer;padding:0}
#picker{width:36px;height:28px;border-radius:8px;border:1px solid #e5e7eb}

.tools{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:22px}
.btn{background:#ffb703;color:#222;border:0;border-radius:12px;padding:10px 14px;cursor:pointer;box-shadow:var(--shadow);font-weight:700}
.btn.primary{background:#2ecc71;color:#fff}
.pager{display:flex;gap:12px;align-items:center;justify-content:center}
.navbtn{min-width:42px;min-height:36px;border:0;border-radius:10px;background:#ffd166;box-shadow:var(--shadow);cursor:pointer}

@media (max-width:640px){
  .svgMount{aspect-ratio:3/4}
  .btn{padding:9px 12px}
}
@media print{
  .topbar,.controls{display:none!important}
  body{background:#fff}
  .stage {box-shadow:none
  padding-bottom: 120px;
  box-sizing: border-box;

  text-align: center;
  overflow: auto;
}
}

.btn.active{outline:3px solid rgba(0,0,0,.25); transform:translateY(-1px)}

/* Prancheta com rolagem vertical apenas */
.svgMount{
  width:100%;
  background:#fff;
  border-radius:var(--radius);
  overflow-y:auto;
  overflow-x:hidden;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  max-height:70vh;
  margin:0 auto;
  position:relative;
}
.zoomWrap{ will-change: transform; }
/* Espaço extra para rolagem quando o zoom aumenta */
.svgMount{ padding-top: 0; }
.svgMount::after{
  content:'';
  display:block;
  height: var(--zoom-extra, 0px);
  width:1px;
}

/* Controles fora da prancheta não escalam */
.btn.active{outline:3px solid rgba(0,0,0,.25); transform:translateY(-1px)}


/* === Progress Widget === */
.progress-widget{display:flex;flex-direction:column; align-items:flex-end; gap:8px; max-width:min(620px, 92vw); margin-left:auto; --emoji:34px; --gap:6px}
@media (max-width:640px){ .progress-widget{} }
.progress-widget .counter{display:flex;align-items:center; gap:8px; font-weight:800; color:#111; font-size:clamp(16px, 2.4vw, 28px)}
.progress-widget .star-icon{font-size:1.1em; filter:drop-shadow(0 1px 0 rgba(0,0,0,.35)); color:#f4b400;}
.progress-widget .percent{font-weight:800; margin-left:6px}
.progressbar{position:relative; width:min(560px, 92vw); height:34px; background:#fff; border-radius:9999px; box-shadow:inset 0 0 0 4px rgba(17,24,39,.85); overflow:visible}
.progressbar .track{position:absolute; left:0; top:0; bottom:0; right:calc(var(--emoji) + var(--gap)); border-radius:9999px; overflow:hidden}
.progress-fill{position:absolute; left:0; top:0; height:100%; width:0%; background:#9dd39a;}
/* === Progress bar refined (no overflow over black borders) === */
.progress-widget{}
@media (max-width:640px){ .progress-widget{} }

.progressbar{
  position:relative;
  width:min(560px, 92vw);
  height:34px;
  padding:4px;               /* space for the border */
  background:transparent;
  border:4px solid #111;     /* FULL black opaque */
  border-radius:9999px;
  box-shadow:none;
}

.progressbar .track{
  position:absolute;
  left:4px; right:4px;
  top:4px; bottom:4px;
  background:#ffffff;        /* empty area stays white */
  border-radius:9999px;
  overflow:hidden;
}

.progress-fill{
  position:absolute; left:0; top:0; height:100%;
  width:0%;
  background:#9dd39a;        /* soft green */
}

/* Finishing touches for progress bar + emoji */
.progress-widget{}
@media (max-width:640px){ .progress-widget{} }

.progressbar{
  position:relative;
  width:min(560px, 92vw);
  height: 42px;
  padding:4px;
  background:transparent;
  border:4px solid #111;         
  border-radius:9999px;
}

.progressbar .track{
  position:absolute; inset:4px;
  right:4px;
  background:#fff;
  border-radius:9999px;
  overflow:hidden;
}

.progress-fill{
  position:absolute; left:0; top:0; bottom:0;
  width:0%;
  background:#9dd39a;
}

/* === Crisp emoji + spacing fix === */
.progress-widget{}
@media (max-width:640px){ .progress-widget{} }

.progressbar{
  position:relative;
  width:min(560px, 92vw);
  height: 42px;
  padding:5px;
  border:4px solid #111; 
  border-radius:9999px;
  background:transparent;
}

.progressbar .track{
  position:absolute; left:5px; right:5px; top:5px; bottom:5px;
  background:#fff;
  border-radius:9999px;
  overflow:hidden;
}

.progress-fill{
  position:absolute; left:0; top:0; bottom:0; width:0%; background:#9dd39a;
}


/* Controles de zoom */
.zoom-controls {
  position: absolute;
  bottom: 10px;
  right: 10px;
  display: flex;
  flex-direction: row;
  gap: 5px;
  z-index: 1000;

  display: flex;
  flex-direction: row !important;
  gap: 8px;
  align-items: center;
  justify-content: center;
}


.zoom-controls button {
  width: 40px;
  height: 40px;
  font-size: 24px;
  line-height: 40px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}


.zoom-controls button:hover {
  background: #ffd54f;
}

/* Fixar área de controles no rodapé */
.controls {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #ffe082;
  padding: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 1000;
  box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
}

#svgMount {
  transform-origin: center top;
  transition: transform 0.2s ease;
  margin: 0 auto;
  display: inline-block;
  max-width: 100%;
  height: auto;
}

/* Setas de navegação no modo zoom */
.zoom-arrows {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  pointer-events: none;
  z-index: 1100;
}

.zoom-arrows button {
  pointer-events: all;
  background: rgba(255, 224, 130, 0.9);
  border: none;
  font-size: 24px;
  font-weight: bold;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: none; /* escondidas inicialmente */
}
.zoom-arrows button:hover {
  background: #ffd54f;
}

.zoom-arrows button {
  pointer-events: all;
  background: rgba(255, 224, 130, 0.9);
  border: none;
  font-size: 24px;
  font-weight: bold;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: none; /* escondidas inicialmente */
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}
#arrow-left {
  left: 10px;
}
#arrow-right {
  right: 10px;
}

/* Responsivo: em telas muito estreitas, empilhar os botões de zoom */

